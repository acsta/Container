# TaskListItem.cs - ä»»åŠ¡åˆ—è¡¨é¡¹ç»„ä»¶

## ğŸ“„ æ–‡ä»¶ä¿¡æ¯

| å±æ€§ | å€¼ |
|------|------|
| æ–‡ä»¶è·¯å¾„ | `Assets/Scripts/Code/Game/UIGame/UIAuction/TaskListItem.cs` |
| å‘½åç©ºé—´ | `TaoTie` |
| åŸºç±» | `UIBaseContainer` |
| å®ç°æ¥å£ | `IOnCreate` |

---

## ğŸ¯ ç±»è¯´æ˜

`TaskListItem` æ˜¯ä»»åŠ¡åˆ—è¡¨é¡¹ç»„ä»¶ï¼Œç”¨äºåœ¨ä»»åŠ¡è¯¦æƒ…çª—å£ä¸­å±•ç¤ºå•ä¸ªä»»åŠ¡çš„è¿›åº¦ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä»»åŠ¡ç›®æ ‡ã€å®Œæˆè¿›åº¦ã€å¥–åŠ±å†…å®¹ç­‰ã€‚

### æ ¸å¿ƒèŒè´£

- **ä»»åŠ¡å±•ç¤º**: æ˜¾ç¤ºä»»åŠ¡çš„ç›®æ ‡ç‰©å“ã€æ•°é‡è¦æ±‚ã€å½“å‰è¿›åº¦
- **è¿›åº¦æ¡**: å¯è§†åŒ–å±•ç¤ºä»»åŠ¡å®Œæˆç™¾åˆ†æ¯”
- **å¥–åŠ±æ˜¾ç¤º**: æ˜¾ç¤ºä»»åŠ¡å®Œæˆåçš„å¥–åŠ±å†…å®¹
- **é¢†å–äº¤äº’**: æ”¯æŒç‚¹å‡»é¢†å–å·²å®Œæˆä»»åŠ¡çš„å¥–åŠ±
- **å…‰æ•ˆåŠ¨ç”»**: é¢†å–æ—¶æ’­æ”¾å…‰æ•ˆåŠ¨ç”»

---

## ğŸ“‹ å­—æ®µè¯´æ˜

### UI ç»„ä»¶å­—æ®µ

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `Bg1/Bg2/Bg3` | `UIImage` | èƒŒæ™¯å›¾ç‰‡ï¼ˆä¸‰å±‚ï¼Œç”¨äºé¢œè‰²åŒºåˆ†ï¼‰ |
| `Level` | `UITextmesh` | å…³å¡ç­‰çº§æ–‡æœ¬ |
| `From` | `UITextmesh` | æ¥æºæ–‡æœ¬ï¼ˆå¦‚"å¸‚åœº"ï¼‰ |
| `Drop` | `UITextmesh` | æ‰è½æç¤ºæ–‡æœ¬ |
| `Icon` | `UIImage` | ç›®æ ‡ç‰©å“å›¾æ ‡ |
| `Value` | `UITextmesh` | è¿›åº¦æ–‡æœ¬ï¼ˆå¦‚"3/10"ï¼‰ |
| `Name` | `UITextmesh` | ç‰©å“/å®¹å™¨åç§° |
| `Bg` | `UIButton` | èƒŒæ™¯æŒ‰é’®ï¼ˆç”¨äºæœªè§£é”å…³å¡ï¼‰ |
| `TaskItem` | `UIImage` | ä»»åŠ¡é¡¹èƒŒæ™¯ï¼ˆç¨€æœ‰åº¦åŒºåˆ†ï¼‰ |
| `Over` | `UIEmptyView` | å·²å®Œæˆæ ‡è®°å®¹å™¨ |
| `Slider` | `UIImage` | è¿›åº¦æ¡å¡«å……å›¾ç‰‡ |
| `Btn` | `UIButton` | ç‚¹å‡»æŒ‰é’® |
| `ValueText2` | `UITextmesh` | é®ç½©è¿›åº¦æ–‡æœ¬ |
| `Mask` | `UIEmptyView` | è¿›åº¦é®ç½© |
| `Rewards` | `UITextmesh` | å¥–åŠ±æ ‡é¢˜ |
| `RewardsVal` | `UITextmesh` | å¥–åŠ±æ•°å€¼ |
| `LightImage` | `UIImage` | é¢†å–å…‰æ•ˆå›¾ç‰‡ |
| `content` | `UIEmptyView` | å†…å®¹å®¹å™¨ |
| `Animator` | `UIAnimator` | åŠ¨ç”»æ§åˆ¶å™¨ |

### æ•°æ®å­—æ®µ

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `config` | `TaskConfig` | ä»»åŠ¡é…ç½®æ•°æ® |

---

## ğŸ”§ æ–¹æ³•è¯´æ˜

### ç”Ÿå‘½å‘¨æœŸæ–¹æ³•

#### `OnCreate()`
ç»„ä»¶åˆ›å»ºæ—¶åˆå§‹åŒ–æ‰€æœ‰ UI å­ç»„ä»¶ã€‚

**ä¸»è¦åŠŸèƒ½:**
1. åˆå§‹åŒ–æ‰€æœ‰ UI ç»„ä»¶å¼•ç”¨
2. ç»‘å®šæŒ‰é’®ç‚¹å‡»äº‹ä»¶

---

### ä¸šåŠ¡æ–¹æ³•

#### `SetData(TaskConfig config)`
è®¾ç½®ä»»åŠ¡æ•°æ®å¹¶åˆ·æ–°æ˜¾ç¤ºã€‚

**å‚æ•°è¯´æ˜:**
- `config`: ä»»åŠ¡é…ç½®æ•°æ®

**ä¸»è¦åŠŸèƒ½:**
1. **çŠ¶æ€æ£€æŸ¥**: è·å–ä»»åŠ¡å®ŒæˆçŠ¶æ€å’Œå½“å‰è¿›åº¦
2. **ç‰©å“ä¿¡æ¯**:
   - æ ¹æ® `ItemType` è·å–ç‰©å“æˆ–å®¹å™¨é…ç½®
   - è®¾ç½®å›¾æ ‡ã€åç§°ã€ç­‰çº§
3. **è¿›åº¦æ˜¾ç¤º**:
   - è®¾ç½®è¿›åº¦æ–‡æœ¬ï¼ˆå¦‚"3/10"ï¼‰
   - è®¾ç½®è¿›åº¦æ¡å¡«å……é‡
   - è®¾ç½®é®ç½©è¿›åº¦
4. **å¥–åŠ±æ˜¾ç¤º**:
   - æ ¹æ® `RewardType` è®¾ç½®å¥–åŠ±æ–‡æœ¬
   - ç±»å‹ 1ï¼šé¤å…æ”¶ç›Šæ—¶é•¿å¥–åŠ±
   - ç±»å‹ 2ï¼šç›´æ¥é‡‘é’±å¥–åŠ±
5. **è§†è§‰æ ·å¼**:
   - æ ¹æ®ç¨€æœ‰åº¦è®¾ç½®èƒŒæ™¯é¢œè‰²
   - æ ¹æ®ç¨€æœ‰åº¦è®¾ç½®ä»»åŠ¡é¡¹èƒŒæ™¯
6. **æŒ‰é’®çŠ¶æ€**: æ ¹æ®å®ŒæˆçŠ¶æ€å’Œå…³å¡ç­‰çº§å†³å®šæ˜¯å¦æ˜¾ç¤ºæŒ‰é’®

#### `OnClickSelf()`
å¤„ç†ä»»åŠ¡é¡¹ç‚¹å‡»äº‹ä»¶ã€‚

**é€»è¾‘:**
- å¦‚æœä»»åŠ¡å·²å®Œæˆä¸”è¿›åº¦è¾¾æ ‡ï¼šé¢†å–å¥–åŠ±
- å¦‚æœä»»åŠ¡æœªå®Œæˆï¼šæ’­æ”¾ç‚¹å‡»åŠ¨ç”»å¹¶æç¤º

#### `OnClickSelfAsync()`
å¼‚æ­¥å¤„ç†å¥–åŠ±é¢†å–ã€‚

**æµç¨‹:**
1. æ£€æŸ¥æ‹å–çŠ¶æ€ï¼ˆå¼€ç›’/ç»“æŸé˜¶æ®µä¸å¯é¢†å–ï¼‰
2. è°ƒç”¨ `PlayerDataManager.ComplexTask()` é¢†å–å¥–åŠ±
3. æ’­æ”¾å…‰æ•ˆåŠ¨ç”»
4. è§¦å‘é‡‘é’±ç§»åŠ¨åŠ¨ç”»ï¼ˆé£å‘é¡¶éƒ¨é‡‘å¸æ˜¾ç¤ºï¼‰
5. åˆ·æ–°ä»»åŠ¡çª—å£åŠ¨ç”»
6. æ¢å¤å†…å®¹é€æ˜åº¦

#### `OnClickLightImageAsync()`
æ’­æ”¾é¢†å–å…‰æ•ˆåŠ¨ç”»ã€‚

**åŠ¨ç”»æ•ˆæœ:**
- å…‰æ•ˆä»æ­£å¸¸å¤§å°ç¼©æ”¾åˆ° 0
- å†…å®¹é€æ˜åº¦ä» 1 å˜ 0 å†æ¢å¤

---

## ğŸ”„ æµç¨‹å›¾

```mermaid
flowchart TD
    A[ç‚¹å‡»ä»»åŠ¡é¡¹] --> B{ä»»åŠ¡å·²å®Œæˆï¼Ÿ}
    B -->|å¦ | C[æ’­æ”¾ç‚¹å‡»åŠ¨ç”»]
    C --> D[æç¤º"æœªè¾¾æˆé¢†å–æ¡ä»¶"]
    
    B -->|æ˜¯ | E{æ‹å–çŠ¶æ€å…è®¸ï¼Ÿ}
    E -->|å¦ | F[æç¤º"ç­‰å¾…å¼€ç›’é˜¶æ®µç»“æŸ"]
    
    E -->|æ˜¯ | G[è°ƒç”¨ ComplexTask é¢†å–]
    G --> H{é¢†å–æˆåŠŸï¼Ÿ}
    H -->|å¦ | I[ç»“æŸ]
    
    H -->|æ˜¯ | J[æ’­æ”¾å…‰æ•ˆåŠ¨ç”»]
    J --> K[é‡‘é’±é£å…¥åŠ¨ç”»]
    K --> L[åˆ·æ–°ä»»åŠ¡åˆ—è¡¨]
    L --> M[æ¢å¤æ˜¾ç¤º]
```

---

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### è®¾ç½®ä»»åŠ¡æ•°æ®

```csharp
// è·å–ä»»åŠ¡é…ç½®
TaskConfig config = TaskConfigCategory.Instance.Get(taskId);

// è®¾ç½®åˆ°åˆ—è¡¨é¡¹
taskListItem.SetData(config);

// ç»„ä»¶ä¼šè‡ªåŠ¨ï¼š
// 1. è·å–å½“å‰è¿›åº¦
// 2. æ˜¾ç¤ºç‰©å“/å®¹å™¨ä¿¡æ¯
// 3. è®¾ç½®è¿›åº¦æ¡
// 4. æ˜¾ç¤ºå¥–åŠ±å†…å®¹
```

### ä»»åŠ¡é…ç½®ç¤ºä¾‹

```csharp
// TaskConfig é…ç½®ç»“æ„
{
    Id: 101,
    ItemType: 0,              // 0=ç‰©å“ï¼Œ1=å®¹å™¨
    ItemId: 1001,             // ç‰©å“/å®¹å™¨ ID
    ItemCount: 10,            // éœ€è¦æ”¶é›†çš„æ•°é‡
    Rare: 3,                  // ç¨€æœ‰åº¦ï¼ˆå½±å“èƒŒæ™¯é¢œè‰²ï¼‰
    RewardType: 2,            // 1=æ”¶ç›Šæ—¶é•¿ï¼Œ2=ç›´æ¥é‡‘é’±
    RewardCount: 5000         // å¥–åŠ±æ•°å€¼
}
```

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [UITaskInfoWin.cs.md](./UITaskInfoWin.cs.md) - ä»»åŠ¡è¯¦æƒ…çª—å£
- [TaskConfig.cs.md](../../../../Module/Generate/Config/TaskConfig.cs.md) - ä»»åŠ¡é…ç½®è¡¨
- [PlayerDataManager.cs.md](../../../Data/PlayerDataManager.cs.md) - ç©å®¶æ•°æ®ç®¡ç†

---

*æœ€åæ›´æ–°ï¼š2026-03-02*
